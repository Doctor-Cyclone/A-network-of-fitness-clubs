(()=>{"use strict";var e;(e=document.getElementById("thanks")).addEventListener("click",(function(t){var n=t.target;(n.closest(".close_icon")||n.closest(".close-btn")||n.closest(".overlay"))&&(e.style.display="none")}));const t=function(e){var t=document.createElement("div"),n=document.getElementById(e),l=n.querySelector("input[type=checkbox]"),o=n.querySelectorAll("input"),c=n.querySelector("button"),s=document.getElementById("thanks"),a=s.querySelector(".form-content"),i=n.querySelectorAll('[name = "club-name"]');t.style.color="#FFD11A",l&&(c.disabled=!0,l.addEventListener("change",(function(){c.disabled=!1}))),i&&(c.disabled=!0,i.forEach((function(e){e.checked?c.disabled=!1:e.addEventListener("change",(function(){c.disabled=!1}))})));var r=function(){o.forEach((function(e){e.value=""})),i&&i.forEach((function(e){e.checked=!1})),l&&(l.checked=!1)};n.addEventListener("submit",(function(e){e.preventDefault(),n.appendChild(t),t.innerHTML="Загрузка...";var l=new FormData(n);console.log(l);var o={};l.forEach((function(e,t){o[t]=e})),u(o).then((function(e){if(200!==e.status)throw new Error("status network not 200");s.style.display="block",a.innerHTML='<h4>Спасибо!</h4>\n                        <p>Ваша заявка отправлена. <br> Мы свяжемся с вами в ближайшее время.</p>\n                        <button class="btn close-btn">OK</button>',t.textContent="",r()})).catch((function(e){console.log(e),s.style.display="block",a.innerHTML='<h4>Упс!</h4>\n                        <p>Что-то пошло не так. <br> Ваша заявка не отправлена.</p>\n                        <button class="btn close-btn">OK</button>',t.textContent="",r()}))}));var u=function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}};var n,l,o,c,s,a,i,r,u,d,y,f,p,v,m,b,g;g=document.querySelector(".club-select").querySelector(".clubs-list ul"),window.addEventListener("click",(function(e){var t=e.target;if(t.closest(".club-select"))"block"===g.style.display?g.style.display="none":g.style.display="block";else if(!t.closest(".clubs-list")){if("block"!==g.style.display)return;g.style.display="none"}})),p=document.getElementById("free_visit_form"),v=document.getElementById("callback_form"),m=document.getElementById("gift"),b=document.querySelector(".fixed-gift"),window.addEventListener("click",(function(e){var t=e.target;t.hasAttribute("type")||(t.classList.contains("open-popup")?p.style.display="block":t.classList.contains("callback-btn")?v.style.display="block":t.closest(".fixed-gift")?(b.style.display="none",m.style.display="block"):(t.closest(".close-form")||t.closest(".overlay")||t.closest(".close-btn"))&&function(e){e.closest("#free_visit_form")?p.style.display="none":e.closest("#callback_form")?v.style.display="none":m.style.display="none"}(t))})),i=document.querySelector(".main-slider"),r=i.querySelectorAll(".slide-text"),u=i.querySelectorAll(".slide"),d=0,y=function(){u[d].style.display="none",++d>=u.length&&(d=0),u[d].style.display="block"},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;a=setInterval(y,e)},r.forEach((function(e){e.addEventListener("mouseover",(function(){clearInterval(a)})),e.addEventListener("mouseout",(function(){f(2e3)}))})),f(2e3),function(){var e,t=document.querySelector(".popup-menu"),n=document.querySelector(".menu-button"),l=document.querySelector(".top-menu"),o=document.querySelector(".head").clientHeight,c=window.getComputedStyle(n).display;e=function(){window.scrollY>o?l.classList.add("fixed-menu"):l.classList.remove("fixed-menu")},window.onscroll=function(){"block"===c&&e()},window.addEventListener("resize",(function(){var t=window.getComputedStyle(n).display;window.onscroll="block"===t?function(){e()}:function(){l.classList.remove("fixed-menu")}})),e();var s=function(){"block"===t.style.display?t.style.display="none":t.style.display="block"};n.addEventListener("click",s),t.addEventListener("click",(function(e){var t=e.target;(t.closest(".close-menu-btn")||"A"===t.tagName)&&s()}))}(),(s=document.getElementById("totop")).style.display="none",s.addEventListener("click",(function(){window.scrollTo(0,0),s.style.display="none"})),window.onscroll=function(){document.documentElement.scrollTop>=700?s.style.display="block":s.style.display="none"},n=document.querySelectorAll('[name = "name"]'),l=document.querySelectorAll('[name = "phone"]'),o=function(e){e.addEventListener("blur",(function(){if(e.value=e.value.replace(/\-{2,}/g,"-"),e.value=e.value.replace(/\s{2,}/g," "),e.value=e.value.replace(/\+{2,}/g,"+"),e.value=e.value.replace(/\({2,}/g,"("),e.value=e.value.replace(/\){2,}/g,")"),e.value=e.value.replace(/^[\s]+|[ \s]+$/,""),e.value=e.value.replace(/^[/-]+|[/-]+$/,""),"name"===e.getAttribute("name"))if(/\D{2}/g.test(e.value)){var t=e.value.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()}));e.value=t.join(" ")}else e.value="";if("phone"===e.getAttribute("name")){if(e.value=e.value.replace(/\d{12,}/g,e.value.substr(0,11)),/\+?[78]([-()]*\d){10}/g.test(e.value.replace(/\s{1,}/g,"")))return;e.value=""}}))},c=function(e){"name"===e.getAttribute("name")?(e.addEventListener("input",(function(){e.value=e.value.replace(/[^а-яё\- ]/gi,"")})),o(e)):(e.addEventListener("input",(function(){e.value=e.value.replace(/[^-()\d\+ ]/g,"")})),o(e))},n.forEach((function(e){c(e)})),l.forEach((function(e){c(e)})),t("banner-form"),t("card_order"),t("footer_form"),t("form1"),t("form2")})();